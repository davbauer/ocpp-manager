import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.CT0A0X_A.js";import{t as x,e as xe,k as e,o as r,r as t,f as ye,n as Ce,q as h,a4 as Ze}from"../chunks/runtime.BhkHmGnc.js";import{a as c,n as we,d as ke,s as i,t as C,c as Me}from"../chunks/render.BQ4Vc4Ij.js";import{i as te}from"../chunks/if.zEQZhpIz.js";import{e as Se,i as Ee}from"../chunks/each.CMEkCpSi.js";import{i as $e}from"../chunks/lifecycle.DzPzqbVW.js";import{b as Ne,s as Re,a as y}from"../chunks/props.BwEu9BMa.js";import{B as et}from"../chunks/BasePage.CnamnGhH.js";import{o as tt,p as at,q as rt,t as st,d as nt,u as ot}from"../chunks/queryClient.C8IPkV7D.js";import{s as Ae,t as _e,b as fe}from"../chunks/class.2ZgpI70S.js";import{b as it}from"../chunks/this.7H9TgV2V.js";import{d as Pe,z as S,t as u}from"../chunks/toast.BILRVjIN.js";import{f as lt}from"../chunks/formatDistanceToNow.DXTjigy3.js";import{S as dt}from"../chunks/Scrollable.Dihwx7Il.js";var ct=we('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 7l-1 1"></path><path d="M14 11h1a2 2 0 0 1 2 2v3a1.5 1.5 0 0 0 3 0v-7l-3 -3"></path><path d="M4 20v-14a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v14"></path><path d="M9 11.5l-1.5 2.5h3l-1.5 2.5"></path><path d="M3 20l12 0"></path><path d="M4 8l10 0"></path></svg>');function gt(l,a){let s=Ne(a,"class",3,"");var o=ct();x(()=>Ae(o,`icon icon-tabler icons-tabler-outline icon-tabler-charging-pile ${(s()||"")??""}`)),c(l,o)}var vt=we('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9.785 6l8.215 8.215l-2.054 2.054a5.81 5.81 0 1 1 -8.215 -8.215l2.054 -2.054z"></path><path d="M4 20l3.5 -3.5"></path><path d="M15 4l-3.5 3.5"></path><path d="M20 9l-3.5 3.5"></path></svg>');function ht(l,a){let s=Ne(a,"class",3,"");var o=vt();x(()=>Ae(o,`icon icon-tabler icons-tabler-outline icon-tabler-plug ${(s()||"")??""}`)),c(l,o)}const ut=(l,a,s,o,v,E)=>{Pe.open({header:"Edit Charger",fields:[{label:"Friendly Name",name:"friendlyName",type:"text",defaultValue:a.charger.friendlyName||"",validation:S.string().min(1,{message:"Please enter a friendly name."})},{label:"Shortcode",name:"shortcode",type:"text",defaultValue:a.charger.shortcode||"",validation:S.string().regex(/^[a-z0-9-]+$/,{message:"Only lowercase letters, numbers, and dashes are allowed (no spaces or other characters)."}).min(5,{message:"Minimum length is 5 characters."}).max(30,{message:"Maximum length is 30 characters."})},{label:"Status",name:"status",type:"dropdown",options:[{label:"Pending",value:"Pending"},{label:"Accepted",value:"Accepted"},{label:"Rejected",value:"Rejected"}],defaultValue:a.charger.status||"Pending",validation:S.enum(["Pending","Accepted","Rejected"])}],actions:[{label:"Save",key:"save",class:"btn-primary",buttonType:"submit",callback:({fieldValues:n,close:w})=>{s().mutate({id:a.charger.id.toString(),friendlyName:n.friendlyName,status:n.status,shortcode:n.shortcode},{onError:()=>{u({message:"Error saving charger",type:"error"})},onSuccess:()=>{u({message:"Charger saved",type:"success"}),w()}})}},{label:"Cancel",key:"cancel",class:"btn-outline",callback:({close:n})=>{n()}},{label:"Delete",key:"delete",class:"btn-error btn-outline",buttonType:"button",callback:({close:n})=>{v().mutate({id:a.charger.id.toString()},{onError:()=>{u({message:"Error deleting charger",type:"error"})},onSuccess:()=>{u({message:"Charger deleted",type:"success"}),n()}}),n()}}]})};var mt=(l,a)=>a("Soft"),bt=(l,a)=>a("Hard"),pt=C('<p class="text-error mt-1 text-sm"> </p>'),_t=C('<button class="bg-base-300 hover:bg-base-100 flex w-full items-center justify-between rounded-lg p-4 shadow-md"><div class="flex items-center gap-4"><!> <div class="flex flex-col text-left"><span class="font-bold"> </span> <span class="text-sm"> </span> <!></div></div> <div class="flex items-center gap-4"><p class="text-sm font-medium"> </p> <div></div></div></button>'),ft=C('<div class="bg-base-200 container mx-auto rounded-lg px-4 py-6 shadow-md"><div class="mb-6 flex items-center justify-between"><div class="flex items-center gap-4"><!> <div><h2 class="text-2xl font-semibold"> </h2> <p class="text-sm text-gray-500"> </p></div></div> <div class="flex gap-x-2"><div><button class="btn btn-ghost btn-sm">Reset</button> <dialog class="modal"><div class="modal-box"><form method="dialog"><button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button></form> <h3 class="mb-10 text-lg font-bold">Reset Charger</h3> <div class="flex gap-x-2"><button class="btn btn-warning btn-sm">Soft Reset</button> <button class="btn btn-error btn-sm">Hard Reset</button></div></div></dialog></div> <button class="btn btn-ghost btn-sm">Edit</button></div></div> <div class="mb-6"><span class="badge badge-lg badge-outline p-3"> </span></div> <table class="bg-base-300 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Connectivity</td><td><span> </span></td></tr><tr><td class="w-60 font-medium">Firmware</td><td> </td></tr><tr><td class="w-60 font-medium">Model</td><td> </td></tr><tr><td class="w-60 font-medium">Last Heartbeat</td><td> </td></tr><tr><td class="w-60 font-medium">Shortcode</td><td> </td></tr></tbody></table> <div class="mt-6"><h3 class="mb-4 text-xl font-bold">Connectors</h3> <div class="space-y-4"><!></div></div></div>');function xt(l,a){xe(a,!0);const s=Re(),o=()=>y(q,"$mutationChargerUpdate",s),v=()=>y(b,"$mutationChargerDelete",s),E=()=>y(k,"$mutationChargerReset",s),n=()=>y(w,"$queryConnectors",s),w=tt(a.charger.id.toString(),1e4),q=at(),b=rt(),k=st(),H=g=>({Available:"bg-success",Preparing:"bg-info",Charging:"bg-primary",SuspendedEVSE:"bg-warning",SuspendedEV:"bg-warning",Finishing:"bg-info",Reserved:"bg-secondary",Unavailable:"bg-base-300",Faulted:"bg-error"})[g]||"bg-base-300";let p;const N=g=>{E().mutate({id:a.charger.id,type:g},{onError:()=>{u({message:"Error resetting charger",type:"error"})},onSuccess:()=>{u({message:"Charger reset",type:"success"}),p.close()}})};var R=ft(),m=e(R),M=e(m),A=e(M);gt(A,{class:"text-primary h-10 w-10"});var P=r(A,2),d=e(P),_=e(d,!0);t(d);var D=r(d,2),z=e(D,!0);t(D),t(P),t(M);var U=r(M,2),V=e(U),ae=e(V);ae.__click=()=>p.showModal();var B=r(ae,2),re=e(B),se=r(e(re),4),ne=e(se);ne.__click=[mt,N];var De=r(ne,2);De.__click=[bt,N],t(se),t(re),t(B),it(B,g=>p=g,()=>p),t(V);var Ue=r(V,2);Ue.__click=[ut,a,o,q,v,b],t(U),t(m);var F=r(m,2),j=e(F),je=e(j,!0);t(j),t(F);var T=r(F,2),oe=e(T),I=e(oe),ie=r(e(I)),L=e(ie),qe=e(L,!0);t(L),t(ie),t(I);var O=r(I),le=r(e(O)),He=e(le,!0);t(le),t(O);var Q=r(O),de=r(e(Q)),ze=e(de,!0);t(de),t(Q);var G=r(Q),ce=r(e(G)),Ve=e(ce,!0);x(()=>i(Ve,a.charger.lastHeartbeat?lt(new Date(a.charger.lastHeartbeat),{addSuffix:!0}):"N/A")),t(ce),t(G);var ge=r(G),ve=r(e(ge)),Be=e(ve,!0);t(ve),t(ge),t(oe),t(T);var he=r(T,2),ue=r(e(he),2),Fe=e(ue);{var Te=g=>{var J=Me(),Ie=Ce(J);Se(Ie,1,()=>n().data,Ee,(Le,f)=>{var K=_t(),W=e(K),me=e(W);ht(me,{class:"h-6 w-6 text-current"});var be=r(me,2),X=e(be),Oe=e(X);t(X);var Y=r(X,2),Qe=e(Y);t(Y);var Ge=r(Y,2);{var Je=$=>{var ee=pt(),Ye=e(ee);t(ee),x(()=>i(Ye,`Error: ${h(f).errorCode??""}`)),c($,ee)};te(Ge,$=>{h(f).errorCode&&$(Je)})}t(be),t(W);var pe=r(W,2),Z=e(pe),Ke=e(Z,!0);t(Z);var We=r(Z,2);const Xe=Ze(()=>`h-2 w-16 rounded-full ${H(h(f).status)}`);t(pe),t(K),x(()=>{i(Oe,`Connector ${h(f).connectorId??""}`),i(Qe,`Max Current: ${h(f).maxCurrent??""}A`),i(Ke,h(f).status),fe(We,h(Xe))}),c(Le,K)}),c(g,J)};te(Fe,g=>{n().data&&g(Te)})}t(ue),t(he),t(R),x(()=>{i(_,a.charger.friendlyName||"Unknown"),i(z,a.charger.vendor||"Unknown Vendor"),_e(j,"badge-warning",a.charger.status==="Pending"),_e(j,"badge-success",a.charger.status==="Accepted"),i(je,a.charger.status||"Unknown"),fe(L,`badge badge-outline ${a.charger.connectivity==="Online"?"badge-success":"badge-warning"} p-3 text-white`),i(qe,a.charger.connectivity||"Unknown"),i(He,a.charger.firmwareVersion||"N/A"),i(ze,a.charger.model||"N/A"),i(Be,a.charger.shortcode||"N/A")}),c(l,R),ye()}ke(["click"]);const yt=(l,a,s)=>{Pe.open({header:"Add Charger",fields:[{label:"Label",name:"label",type:"text",defaultValue:"",validation:S.string().min(1)},{label:"Shortcode",name:"shortcode",type:"text",defaultValue:"your-shortcode",validation:S.string().regex(/^[a-z0-9-]+$/,{message:"Only lowercase letters, numbers, and dashes are allowed (no spaces or other characters)."}).min(5,{message:"Minimum length is 5 characters."}).max(30,{message:"Maximum length is 30 characters."})}],actions:[{label:"Create",key:"create",class:"btn-primary",buttonType:"submit",callback:({fieldValues:o,close:v})=>{a().mutate({friendlyName:o.label,shortcode:o.shortcode},{onError:()=>{u({message:"Error creating charger",type:"error"})},onSuccess:()=>{u({message:"Charger created",type:"success"}),v()}})}}]})};var Ct=C('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">Loading chargers...</p></div>'),wt=C('<div class="space-y-6"><!></div>'),kt=C('<div class="container mx-auto px-4"><div class="mb-6 flex items-center justify-between"><h1 class="text-2xl font-bold">Chargers</h1> <button class="btn btn-primary">Add Charger</button></div> <!></div>');function Ft(l,a){xe(a,!1);const s=Re(),o=()=>y(n,"$mutationChargerCreate",s),v=()=>y(E,"$queryChargers",s),E=nt(1e4),n=ot();$e(),et(l,{title:"Monitoring",children:(w,q)=>{var b=kt(),k=e(b),H=r(e(k),2);H.__click=[yt,o,n],t(k);var p=r(k,2);dt(p,{class:"p-4",maxHeight:"80svh",children:(N,R)=>{var m=wt(),M=e(m);{var A=d=>{var _=Me(),D=Ce(_);Se(D,1,()=>v().data,Ee,(z,U)=>{xt(z,{get charger(){return h(U)}})}),c(d,_)},P=d=>{var _=Ct();c(d,_)};te(M,d=>{v().data?d(A):d(P,!1)})}t(m),c(N,m)},$$slots:{default:!0}}),t(b),c(w,b)},$$slots:{default:!0}}),ye()}ke(["click"]);export{Ft as component};
