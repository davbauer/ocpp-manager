import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.Bx86S8IA.js";import{p as st,a as lt,f as t,j as e,g as a,i as ot,t as N,k as o}from"../chunks/runtime.DvGnrOxf.js";import{d as mt,a as p,t as y,c as ct,s as u}from"../chunks/render.CP-ZJxph.js";import{i as ft}from"../chunks/if.BktC0TgM.js";import{e as pt,i as ut}from"../chunks/each.DLolFtAN.js";import{i as vt}from"../chunks/lifecycle.CZF0KIGC.js";import{s as bt,a as b}from"../chunks/props.CmCJi6lp.js";import{e as yt,k as gt,l as xt,m as _t}from"../chunks/queryClient.DE5wO5Te.js";import{d as W,z as d}from"../chunks/drawerStore.DedmOxCn.js";import{B as Tt}from"../chunks/BasePage.C0WGob7w.js";import{I as Dt}from"../chunks/IconDeviceAirtag.B9AVD1kC.js";import{S as Rt}from"../chunks/Scrollable.o539_OHr.js";import{f as P}from"../chunks/formatDistanceToNow.DXTjigy3.js";const wt=(g,c,n)=>{W.open({header:"Add RFID Tag",fields:[{label:"Friendly Name",name:"friendlyName",type:"text",defaultValue:"",validation:d.string().min(1)},{label:"RFID Tag",name:"rfidTag",type:"text",defaultValue:"",validation:d.string().min(1)},{label:"Expiry Date",name:"expiryDate",type:"date",defaultValue:"",validation:d.string()},{label:"Watt Limit",name:"wLimit",type:"number",validation:d.number()}],actions:[{label:"Create",key:"create",class:"btn-primary",buttonType:"submit",callback:({fieldValues:s,close:x})=>{c().mutate({friendlyName:s.friendlyName,expiryDate:s.expiryDate?new Date(s.expiryDate):null,rfidTag:s.rfidTag,wLimit:s.wLimit||null}),x()}}]})};var ht=(g,c,n)=>c(o(n)),$t=y('<div class="bg-base-200 rounded-lg p-6 shadow-md"><div class="mb-6 flex items-center justify-between"><div class="mb-6 flex items-center gap-4"><!> <div><h3 class="text-xl font-semibold"> </h3> <p class="text-sm text-gray-500"> </p></div></div> <button class="btn btn-ghost btn-sm">Edit</button></div> <table class="bg-base-300 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Created</td><td> </td></tr><tr><td class="w-60 font-medium">Expiry Date</td><td> </td></tr><tr><td class="w-60 font-medium">Watt Limit</td><td> </td></tr></tbody></table></div>'),kt=y('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">Loading RFID Tags...</p></div>'),Nt=y('<div class="space-y-6"><!></div>'),Lt=y('<div class="container mx-auto px-4"><div class="mb-6 flex items-center justify-between"><h1 class="text-2xl font-bold">RFID Tags</h1> <button class="btn btn-primary">Add RFID Tag</button></div> <!></div>');function Qt(g,c){st(c,!1);const n=bt(),s=()=>b(F,"$mutationRfidTagCreate",n),x=()=>b(Q,"$mutationRfidTagUpdate",n),B=()=>b(H,"$mutationRfidTagDelete",n),L=()=>b(z,"$queryRfidTags",n),z=yt(1e4),F=gt(),H=xt(),Q=_t(),G=r=>{W.open({header:"Edit RFID Tag",fields:[{label:"Friendly Name",name:"friendlyName",type:"text",defaultValue:r.friendlyName,validation:d.string().min(1)},{label:"RFID Tag",name:"rfidTag",type:"text",defaultValue:r.rfidTag,validation:d.string().min(1)},{label:"Expiry Date",name:"expiryDate",type:"date",defaultValue:r.expiryDate||"",validation:d.string()},{label:"Watt Limit",name:"wLimit",type:"number",defaultValue:r.wLimit||void 0,validation:d.coerce.number()}],actions:[{label:"Save",key:"save",class:"btn-primary",buttonType:"submit",callback:({fieldValues:i,close:f})=>{x().mutate({id:r.id,friendlyName:i.friendlyName,expiryDate:i.expiryDate?new Date(i.expiryDate):null,rfidTag:i.rfidTag,wLimit:i.wLimit??null}),f()}},{label:"Cancel",key:"cancel",class:"btn-outline",callback:({close:i})=>i()},{label:"Delete",key:"delete",class:"btn-error btn-outline",buttonType:"button",callback:({close:i})=>{B().mutate({id:r.id}),i()}}]})};vt(),Tt(g,{title:"RFID Tags",children:(r,i)=>{var f=Lt(),_=t(f),J=e(t(_),2);J.__click=[wt,s,F],a(_);var K=e(_,2);Rt(K,{class:"p-4",maxHeight:"80svh",children:(O,Ft)=>{var T=Nt(),X=t(T);{var Y=m=>{var v=ct(),V=ot(v);pt(V,1,()=>L().data,ut,(tt,l)=>{var D=$t(),R=t(D),w=t(R),I=t(w);Dt(I,{class:"text-primary h-10 w-10"});var C=e(I,2),h=t(C),at=t(h,!0);a(h);var E=e(h,2),et=t(E);a(E),a(C),a(w);var it=e(w,2);it.__click=[ht,G,l],a(R);var S=e(R,2),A=t(S),$=t(A),U=e(t($)),rt=t(U,!0);N(()=>u(rt,P(new Date(o(l).createdAt),{addSuffix:!0}))),a(U),a($);var k=e($),j=e(t(k)),dt=t(j,!0);N(()=>u(dt,o(l).expiryDate?P(new Date(o(l).expiryDate),{addSuffix:!0}):"N/A")),a(j),a(k);var q=e(k),M=e(t(q)),nt=t(M,!0);a(M),a(q),a(A),a(S),a(D),N(()=>{u(at,o(l).friendlyName),u(et,`RFID: ${o(l).rfidTag??""}`),u(nt,o(l).wLimit??"No limit")}),p(tt,D)}),p(m,v)},Z=m=>{var v=kt();p(m,v)};ft(X,m=>{L().data?m(Y):m(Z,!1)})}a(T),p(O,T)},$$slots:{default:!0}}),a(f),p(r,f)},$$slots:{default:!0}}),lt()}mt(["click"]);export{Qt as component};
