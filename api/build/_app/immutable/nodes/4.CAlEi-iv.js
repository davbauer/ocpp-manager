import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.Bx86S8IA.js";import{p as yt,a as _t,t as I,f as a,j as i,g as e,i as Ct,k as o,o as tt}from"../chunks/runtime.DvGnrOxf.js";import{d as xt,a as y,t as $,c as Dt,s as _}from"../chunks/render.CP-ZJxph.js";import{i as It}from"../chunks/if.BktC0TgM.js";import{e as $t,i as At}from"../chunks/each.DLolFtAN.js";import{i as wt}from"../chunks/lifecycle.CZF0KIGC.js";import{s as zt,a as f}from"../chunks/props.CmCJi6lp.js";import{b as Tt,d as kt,e as St,f as qt,g as Nt,h as Rt}from"../chunks/queryClient.DOObSZT0.js";import{z as h,d as et}from"../chunks/drawerStore.DedmOxCn.js";import{B as Et}from"../chunks/BasePage.C0WGob7w.js";import{I as Pt}from"../chunks/IconLockPin.Cd3JSPAq.js";import{S as Ut}from"../chunks/Scrollable.B9HdNwwQ.js";import{f as at}from"../chunks/formatDistanceToNow.DXTjigy3.js";const jt=(A,m,n,d,u,w,P)=>{const C={header:"Add Charge Authorization",fields:[{label:"Charger ID",name:"chargerId",type:"dropdown",options:m().data?m().data.map(r=>({label:`${r.friendlyName} (${r.vendor})`,value:r.id.toString()})):[],validation:h.string().min(1)},{label:"Expiry Date",name:"expiryDate",type:"date",defaultValue:"",validation:h.string()},{label:"RFID Tag ID",name:"rfidTagId",type:"dropdown",options:d().data?d().data.map(r=>({label:`${r.friendlyName} (${r.rfidTag})`,value:r.id.toString()})):[],validation:h.string().min(1)}],actions:[{label:"Create",key:"create",class:"btn-primary",buttonType:"submit",callback:({fieldValues:r,close:x})=>{w().mutate({chargerId:parseInt(r.chargerId),expiryDate:r.expiryDate?new Date(r.expiryDate):null,rfidTagId:parseInt(r.rfidTagId)||null}),x()}}]};et.open(C)};var Ft=(A,m,n)=>m(o(n)),Mt=$('<div class="bg-base-200 rounded-lg p-6 shadow-md"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><!> <div><h3 class="text-xl font-semibold"> </h3></div></div> <button class="btn btn-ghost btn-sm">Edit</button></div> <table class="bg-base-300 mt-4 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Charging Station</td><td> </td></tr><tr><td class="w-60 font-medium">RFID Tag</td><td> </td></tr><tr><td class="w-60 font-medium">Expiry Date</td><td> </td></tr><tr><td class="w-60 font-medium">Created</td><td> </td></tr></tbody></table></div>'),Qt=$('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">Loading Charge Authorizations...</p></div>'),Bt=$('<div class="space-y-6"><!></div>'),Lt=$('<div class="container mx-auto px-4"><div class="mb-6 flex items-center justify-between"><h1 class="text-2xl font-bold">Charge Authorizations</h1> <button class="btn btn-primary">Add Charge Authorization</button></div> <!></div>');function oa(A,m){yt(m,!1);const n=zt(),d=()=>f(x,"$queryChargers",n),u=()=>f(j,"$queryRfidTags",n),w=()=>f(F,"$mutationChargeAuthorizationCreate",n),P=()=>f(rt,"$mutationChargeAuthorizationUpdate",n),U=()=>f(it,"$mutationChargeAuthorizationDelete",n),C=()=>f(r,"$queryChargeAuthorizations",n),r=Tt(1e4),x=kt(1e4),j=St(1e4),F=qt(),rt=Nt(),it=Rt(),ot=l=>{var p;const b={header:"Edit Charge Authorization",fields:[{label:"Charger ID",name:"chargerId",type:"dropdown",defaultValue:l.chargerId.toString(),options:d().data?d().data.map(t=>({label:`${t.friendlyName} (${t.vendor})`,value:t.id.toString()})):[],validation:h.string().min(1)},{label:"Expiry Date",name:"expiryDate",type:"date",defaultValue:l.expiryDate||"",validation:h.string()},{label:"RFID Tag ID",name:"rfidTagId",type:"dropdown",defaultValue:((p=l.rfidTagId)==null?void 0:p.toString())||"",options:u().data?u().data.map(t=>({label:`${t.friendlyName} (${t.rfidTag})`,value:t.id.toString()})):[],validation:h.string().min(1)}],actions:[{label:"Save",key:"save",class:"btn-primary",buttonType:"submit",callback:({fieldValues:t,close:z})=>{P().mutate({id:l.id,chargerId:parseInt(t.chargerId),expiryDate:t.expiryDate?new Date(t.expiryDate):null,rfidTagId:parseInt(t.rfidTagId)||null}),z()}},{label:"Cancel",key:"cancel",class:"btn-outline",callback:({close:t})=>{t()}},{label:"Delete",key:"delete",class:"btn-error btn-outline",buttonType:"button",callback:({close:t})=>{U().mutate({id:l.id}),t()}}]};et.open(b)};wt(),Et(A,{title:"Charge Authorizations",children:(l,nt)=>{var b=Lt(),p=a(b),t=i(a(p),2);t.__click=[jt,d,x,u,j,w,F],e(p);var z=i(p,2);Ut(z,{class:"p-4",maxHeight:"80svh",children:(dt,Ht)=>{var T=Bt(),st=a(T);{var lt=g=>{var D=Dt(),mt=Ct(D);$t(mt,1,()=>C().data,At,(ut,c)=>{var k=Mt();const M=tt(()=>{var s;return(s=u().data)==null?void 0:s.find(v=>v.id===o(c).rfidTagId)}),Q=tt(()=>{var s;return(s=d().data)==null?void 0:s.find(v=>v.id===o(c).chargerId)});var S=a(k),q=a(S),B=a(q);Pt(B,{class:"text-primary h-10 w-10"});var L=i(B,2),H=a(L),pt=a(H);e(H),e(L),e(q);var gt=i(q,2);gt.__click=[Ft,ot,c],e(S);var G=i(S,2),J=a(G),N=a(J),K=i(a(N)),vt=a(K);e(K),e(N);var R=i(N),O=i(a(R)),ft=a(O);e(O),e(R);var E=i(R),W=i(a(E)),ht=a(W,!0);I(()=>_(ht,o(c).expiryDate?at(new Date(o(c).expiryDate),{addSuffix:!0}):"N/A")),e(W),e(E);var X=i(E),Y=i(a(X)),bt=a(Y,!0);I(()=>_(bt,at(new Date(o(c).createdAt),{addSuffix:!0}))),e(Y),e(X),e(J),e(G),e(k),I(()=>{var s,v,Z,V;_(pt,`Charger ID: ${o(c).chargerId??""}`),_(vt,`${((s=o(Q))==null?void 0:s.friendlyName)??""} (${((v=o(Q))==null?void 0:v.vendor)??""})`),_(ft,`${((Z=o(M))==null?void 0:Z.friendlyName)??""} (${((V=o(M))==null?void 0:V.rfidTag)??""})`)}),y(ut,k)}),y(g,D)},ct=g=>{var D=Qt();y(g,D)};It(st,g=>{C().data?g(lt):g(ct,!1)})}e(T),y(dt,T)},$$slots:{default:!0}}),e(b),I(()=>t.disabled=d().isPending||u().isPending),y(l,b)},$$slots:{default:!0}}),_t()}xt(["click"]);export{oa as component};
