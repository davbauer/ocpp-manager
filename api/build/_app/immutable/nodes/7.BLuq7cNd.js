import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.Bx86S8IA.js";import{t as _,p as ce,f as e,j as r,g as t,a as ve,i as ge,k as u,a3 as Be}from"../chunks/runtime.DvGnrOxf.js";import{a as d,n as he,d as ue,s as o,t as x,c as me}from"../chunks/render.CP-ZJxph.js";import{i as W}from"../chunks/if.BktC0TgM.js";import{e as be,i as pe}from"../chunks/each.DLolFtAN.js";import{i as Fe}from"../chunks/lifecycle.CZF0KIGC.js";import{b as fe,s as _e,a as N}from"../chunks/props.CmCJi6lp.js";import{B as Te}from"../chunks/BasePage.C0WGob7w.js";import{n as Ie,o as Le,p as Oe,d as Qe,q as Ge}from"../chunks/queryClient.DE5wO5Te.js";import{s as xe,t as ie,b as de}from"../chunks/class.CWCituMS.js";import{d as we,z as A}from"../chunks/drawerStore.DedmOxCn.js";import{f as Je}from"../chunks/formatDistanceToNow.DXTjigy3.js";import{S as Ke}from"../chunks/Scrollable.o539_OHr.js";var We=he('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 7l-1 1"></path><path d="M14 11h1a2 2 0 0 1 2 2v3a1.5 1.5 0 0 0 3 0v-7l-3 -3"></path><path d="M4 20v-14a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v14"></path><path d="M9 11.5l-1.5 2.5h3l-1.5 2.5"></path><path d="M3 20l12 0"></path><path d="M4 8l10 0"></path></svg>');function Xe(c,a){let s=fe(a,"class",3,"");var n=We();_(()=>xe(n,`icon icon-tabler icons-tabler-outline icon-tabler-charging-pile ${(s()||"")??""}`)),d(c,n)}var Ye=he('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9.785 6l8.215 8.215l-2.054 2.054a5.81 5.81 0 1 1 -8.215 -8.215l2.054 -2.054z"></path><path d="M4 20l3.5 -3.5"></path><path d="M15 4l-3.5 3.5"></path><path d="M20 9l-3.5 3.5"></path></svg>');function Ze(c,a){let s=fe(a,"class",3,"");var n=Ye();_(()=>xe(n,`icon icon-tabler icons-tabler-outline icon-tabler-plug ${(s()||"")??""}`)),d(c,n)}const $e=(c,a,s,n,v,w)=>{we.open({header:"Edit Charger",fields:[{label:"Friendly Name",name:"friendlyName",type:"text",defaultValue:a.charger.friendlyName||"",validation:A.string().min(1,{message:"Please enter a friendly name."})},{label:"Shortcode",name:"shortcode",type:"text",defaultValue:a.charger.shortcode||"",validation:A.string().regex(/^[a-z0-9-]+$/,{message:"Only lowercase letters, numbers, and dashes are allowed (no spaces or other characters)."}).min(5,{message:"Minimum length is 5 characters."}).max(30,{message:"Maximum length is 30 characters."})},{label:"Status",name:"status",type:"dropdown",options:[{label:"Pending",value:"Pending"},{label:"Accepted",value:"Accepted"},{label:"Rejected",value:"Rejected"}],defaultValue:a.charger.status||"Pending",validation:A.enum(["Pending","Accepted","Rejected"])}],actions:[{label:"Save",key:"save",class:"btn-primary",buttonType:"submit",callback:({fieldValues:l,close:i})=>{s().mutate({id:a.charger.id.toString(),friendlyName:l.friendlyName,status:l.status,shortcode:l.shortcode}),i()}},{label:"Cancel",key:"cancel",class:"btn-outline",callback:({fieldValues:l,close:i})=>{i()}},{label:"Delete",key:"delete",class:"btn-error btn-outline",buttonType:"button",callback:({fieldValues:l,close:i})=>{v().mutate({id:a.charger.id.toString()}),i()}}]})};var et=x('<p class="text-error mt-1 text-sm"> </p>'),tt=x('<button class="bg-base-300 hover:bg-base-100 flex w-full items-center justify-between rounded-lg p-4 shadow-md"><div class="flex items-center gap-4"><!> <div class="flex flex-col text-left"><span class="font-bold"> </span> <span class="text-sm"> </span> <!></div></div> <div class="flex items-center gap-4"><p class="text-sm font-medium"> </p> <div></div></div></button>'),at=x('<div class="bg-base-200 container mx-auto rounded-lg px-4 py-6 shadow-md"><div class="mb-6 flex items-center justify-between"><div class="flex items-center gap-4"><!> <div><h2 class="text-2xl font-semibold"> </h2> <p class="text-sm text-gray-500"> </p></div></div> <button class="btn btn-ghost btn-sm">Edit</button></div> <div class="mb-6"><span class="badge badge-lg badge-outline p-3"> </span></div> <table class="bg-base-300 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Connectivity</td><td><span> </span></td></tr><tr><td class="w-60 font-medium">Firmware</td><td> </td></tr><tr><td class="w-60 font-medium">Model</td><td> </td></tr><tr><td class="w-60 font-medium">Last Heartbeat</td><td> </td></tr><tr><td class="w-60 font-medium">Shortcode</td><td> </td></tr></tbody></table> <div class="mt-6"><h3 class="mb-4 text-xl font-bold">Connectors</h3> <div class="space-y-4"><!></div></div></div>');function rt(c,a){ce(a,!0);const s=_e(),n=()=>N(i,"$mutationChargerUpdate",s),v=()=>N(U,"$mutationChargerDelete",s),w=()=>N(l,"$queryConnectors",s),l=Ie(a.charger.id.toString(),1e4),i=Le(),U=Oe(),y=S=>({Available:"bg-success",Preparing:"bg-info",Charging:"bg-primary",SuspendedEVSE:"bg-warning",SuspendedEV:"bg-warning",Finishing:"bg-info",Reserved:"bg-secondary",Unavailable:"bg-base-300",Faulted:"bg-error"})[S]||"bg-base-300";var m=at(),C=e(m),k=e(C),P=e(k);Xe(P,{class:"text-primary h-10 w-10"});var j=r(P,2),b=e(j),V=e(b,!0);t(b);var D=r(b,2),q=e(D,!0);t(D),t(j),t(k);var g=r(k,2);g.__click=[$e,a,n,i,v,U],t(C);var h=r(C,2),p=e(h),E=e(p,!0);t(p),t(h);var M=r(h,2),X=e(M),z=e(X),Y=r(e(z)),H=e(Y),ye=e(H,!0);t(H),t(Y),t(z);var R=r(z),Z=r(e(R)),Ce=e(Z,!0);t(Z),t(R);var B=r(R),$=r(e(B)),ke=e($,!0);t($),t(B);var F=r(B),ee=r(e(F)),Me=e(ee,!0);_(()=>o(Me,a.charger.lastHeartbeat?Je(new Date(a.charger.lastHeartbeat),{addSuffix:!0}):"N/A")),t(ee),t(F);var te=r(F),ae=r(e(te)),Se=e(ae,!0);t(ae),t(te),t(X),t(M);var re=r(M,2),se=r(e(re),2),Ne=e(se);{var Ae=S=>{var T=me(),Pe=ge(T);be(Pe,1,()=>w().data,pe,(De,f)=>{var I=tt(),L=e(I),ne=e(L);Ze(ne,{class:"h-6 w-6 text-current"});var oe=r(ne,2),O=e(oe),Ue=e(O);t(O);var Q=r(O,2),je=e(Q);t(Q);var Ve=r(Q,2);{var qe=J=>{var K=et(),Re=e(K);t(K),_(()=>o(Re,`Error: ${u(f).errorCode??""}`)),d(J,K)};W(Ve,J=>{u(f).errorCode&&J(qe)})}t(oe),t(L);var le=r(L,2),G=e(le),Ee=e(G,!0);t(G);var ze=r(G,2);const He=Be(()=>`h-2 w-16 rounded-full ${y(u(f).status)}`);t(le),t(I),_(()=>{o(Ue,`Connector ${u(f).connectorId??""}`),o(je,`Max Current: ${u(f).maxCurrent??""}A`),o(Ee,u(f).status),de(ze,u(He))}),d(De,I)}),d(S,T)};W(Ne,S=>{w().data&&S(Ae)})}t(se),t(re),t(m),_(()=>{o(V,a.charger.friendlyName||"Unknown"),o(q,a.charger.vendor||"Unknown Vendor"),ie(p,"badge-warning",a.charger.status==="Pending"),ie(p,"badge-success",a.charger.status==="Accepted"),o(E,a.charger.status||"Unknown"),de(H,`badge badge-outline ${a.charger.connectivity==="Online"?"badge-success":"badge-warning"} p-3 text-white`),o(ye,a.charger.connectivity||"Unknown"),o(Ce,a.charger.firmwareVersion||"N/A"),o(ke,a.charger.model||"N/A"),o(Se,a.charger.shortcode||"N/A")}),d(c,m),ve()}ue(["click"]);const st=(c,a,s)=>{we.open({header:"Add Charger",fields:[{label:"Label",name:"label",type:"text",defaultValue:"",validation:A.string().min(1)},{label:"Shortcode",name:"shortcode",type:"text",defaultValue:"your-shortcode",validation:A.string().regex(/^[a-z0-9-]+$/,{message:"Only lowercase letters, numbers, and dashes are allowed (no spaces or other characters)."}).min(5,{message:"Minimum length is 5 characters."}).max(30,{message:"Maximum length is 30 characters."})}],actions:[{label:"Create",key:"create",class:"btn-primary",buttonType:"submit",callback:({fieldValues:n,close:v})=>{a().mutate({friendlyName:n.label,shortcode:n.shortcode},{onSuccess:()=>v()})}}]})};var nt=x('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">Loading chargers...</p></div>'),ot=x('<div class="space-y-6"><!></div>'),lt=x('<div class="container mx-auto px-4"><div class="mb-6 flex items-center justify-between"><h1 class="text-2xl font-bold">Chargers</h1> <button class="btn btn-primary">Add Charger</button></div> <!></div>');function yt(c,a){ce(a,!1);const s=_e(),n=()=>N(l,"$mutationChargerCreate",s),v=()=>N(w,"$queryChargers",s),w=Qe(1e4),l=Ge();Fe(),Te(c,{title:"Monitoring",children:(i,U)=>{var y=lt(),m=e(y),C=r(e(m),2);C.__click=[st,n,l],t(m);var k=r(m,2);Ke(k,{class:"p-4",maxHeight:"80svh",children:(P,j)=>{var b=ot(),V=e(b);{var D=g=>{var h=me(),p=ge(h);be(p,1,()=>v().data,pe,(E,M)=>{rt(E,{get charger(){return u(M)}})}),d(g,h)},q=g=>{var h=nt();d(g,h)};W(V,g=>{v().data?g(D):g(q,!1)})}t(b),d(P,b)},$$slots:{default:!0}}),t(y),d(i,y)},$$slots:{default:!0}}),ve()}ue(["click"]);export{yt as component};
