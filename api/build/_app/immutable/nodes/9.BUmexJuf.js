import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.K_zCUCQM.js";import{e as wt,f as $t,k as d,r as o,n as It,o as u,t as W,q as f}from"../chunks/runtime.ehUlzqf7.js";import{a as $,t as S,c as Nt,s as h,e as Ft}from"../chunks/render.CTvaeiJJ.js";import{i as St}from"../chunks/if.DhglbZ1u.js";import{e as kt,i as At}from"../chunks/each.xjQWOxjV.js";import{i as Yt}from"../chunks/lifecycle.BkkXAv86.js";import{s as Ot,a as at}from"../chunks/props.BJYttQBT.js";import{u as zt,v as Ht}from"../chunks/queryClient.D14jiU7u.js";import{B as Ct}from"../chunks/BasePage.BtoTIJcp.js";import{S as Et}from"../chunks/Scrollable.DcwQ1d9i.js";import{t as k,c as F,n as x,g as st,m as Ut,a as ct,b as pt,d as qt,e as Pt,h as nt,i as Wt,j as jt,k as Bt,l as Lt,f as Rt}from"../chunks/formatDistanceToNow.Cbs4euKL.js";function Qt(a,t,r){const e=k(a);return isNaN(t)?F(a,NaN):(t&&e.setDate(e.getDate()+t),e)}function Gt(a,t,r){const e=k(a);if(isNaN(t))return F(a,NaN);if(!t)return e;const s=e.getDate(),n=F(a,e.getTime());n.setMonth(e.getMonth()+t+1,0);const c=n.getDate();return s>=c?n:(e.setFullYear(n.getFullYear(),n.getMonth(),s),e)}function I(a,t,r){const{years:e=0,months:s=0,weeks:n=0,days:c=0,hours:g=0,minutes:i=0,seconds:m=0}=t,_=k(a),v=s||e?Gt(_,s+e*12):_,y=c||n?Qt(v,c+n*7):v,M=i+g*60,D=(m+M*60)*1e3;return F(a,+y+D)}function dt(a,t){const r=k(a);return r.setHours(0,0,0,0),r}function Jt(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=dt(e),c=dt(s),g=+n-st(n),i=+c-st(c);return Math.round((g-i)/Ut)}function Kt(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t);return e.getFullYear()-s.getFullYear()}function Vt(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=ot(e,s),c=Math.abs(Jt(e,s));e.setDate(e.getDate()-n*c);const g=+(ot(e,s)===-n),i=n*(c-g);return i===0?0:i}function ot(a,t){const r=a.getFullYear()-t.getFullYear()||a.getMonth()-t.getMonth()||a.getDate()-t.getDate()||a.getHours()-t.getHours()||a.getMinutes()-t.getMinutes()||a.getSeconds()-t.getSeconds()||a.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function Xt(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=(+e-+s)/pt;return ct(r==null?void 0:r.roundingMethod)(n)}function Zt(a,t,r){const e=qt(a,t)/Pt;return ct(r==null?void 0:r.roundingMethod)(e)}function te(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=nt(e,s),c=Math.abs(Kt(e,s));e.setFullYear(1584),s.setFullYear(1584);const g=nt(e,s)===-n,i=n*(c-+g);return i===0?0:i}function ee(a,t){const[r,e]=x(a,t.start,t.end);return{start:r,end:e}}const re=["years","months","weeks","days","hours","minutes","seconds"];function ae(a,t){const r=jt(),e=(t==null?void 0:t.locale)??r.locale??Wt,s=(t==null?void 0:t.format)??re,n=(t==null?void 0:t.zero)??!1,c=(t==null?void 0:t.delimiter)??" ";return e.formatDistance?s.reduce((i,m)=>{const _=`x${m.replace(/(^.)/,y=>y.toUpperCase())}`,v=a[m];return v!==void 0&&(n||a[m])?i.concat(e.formatDistance(_,v)):i},[]).join(c):""}function se(a,t){const{start:r,end:e}=ee(t==null?void 0:t.in,a),s={},n=te(e,r);n&&(s.years=n);const c=I(r,{years:s.years}),g=Bt(e,c);g&&(s.months=g);const i=I(c,{months:s.months}),m=Vt(e,i);m&&(s.days=m);const _=I(i,{days:s.days}),v=Xt(e,_);v&&(s.hours=v);const y=I(_,{hours:s.hours}),M=Zt(e,y);M&&(s.minutes=M);const A=I(y,{minutes:s.minutes}),D=Lt(e,A);return D&&(s.seconds=D),s}var ne=S('<div class="bg-base-200 rounded-lg p-6 shadow-md"><div class="mb-4 flex items-center justify-between"><div><h3 class="text-xl font-semibold"> </h3> <p class="text-sm text-gray-500">Status: <span class="font-bold"> </span></p></div> <button class="btn btn-ghost btn-sm">Delete</button></div> <table class="bg-base-300 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Charger</td><td> </td></tr><tr><td class="w-60 font-medium">Connector</td><td> </td></tr><tr><td class="w-60 font-medium">Tag Used</td><td> </td></tr><tr><td class="w-60 font-medium">Duration</td><td> </td></tr><tr><td class="w-60 font-medium">Energy Delivered</td><td> </td></tr><tr><td class="w-60 font-medium">Reason</td><td> </td></tr><tr><td class="w-60 font-medium">Payment Status</td><td> </td></tr></tbody></table></div>'),de=S('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">No Transactions Found</p></div>'),oe=S('<div class="space-y-6"><!></div>'),ce=S('<div class="container mx-auto px-4"><!></div>');function Me(a,t){wt(t,!1);const r=Ot(),e=()=>at(g,"$mutationTransactionDelete",r),s=()=>at(c,"$queryTransactions",r);function n(m,_){if(!_)return"N/A";const v=se({start:new Date(m),end:new Date(_)});return ae(v)}const c=zt(1e4),g=Ht(),i=m=>{e().mutate({id:m})};Yt(),Ct(a,{title:"Transactions",children:(m,_)=>{var v=ce(),y=d(v);Et(y,{class:"p-4",maxHeight:"80svh",children:(M,A)=>{var D=oe(),it=d(D);{var ut=T=>{var N=Nt(),ft=It(N);kt(ft,1,()=>s().data,At,(mt,l)=>{var Y=ne(),O=d(Y),z=d(O),H=d(z),vt=d(H);o(H);var j=u(H,2),B=u(d(j)),gt=d(B,!0);o(B),o(j),o(z);var _t=u(z,2);o(O);var L=u(O,2),R=d(L),C=d(R),Q=u(d(C)),ht=d(Q,!0);o(Q),o(C);var E=u(C),G=u(d(E)),yt=d(G,!0);o(G),o(E);var U=u(E),J=u(d(U)),Dt=d(J,!0);o(J),o(U);var p=u(U),K=u(d(p)),bt=d(K,!0);W(()=>{var b;return h(bt,n(f(l).startTime,(b=f(l))==null?void 0:b.stopTime))}),o(K),o(p);var q=u(p),V=u(d(q)),Mt=d(V,!0);W(()=>{var b,w;return h(Mt,f(l).energyDelivered?`${f(l).energyDelivered/1e3} kWh`:f(l).estimatedEnergyDelivered?`Estimated ${(b=f(l).estimatedEnergyDelivered)==null?void 0:b.total_energy_delivered} kWh ${Rt((w=f(l).estimatedEnergyDelivered)==null?void 0:w.last_update_timestamp)}`:"N/A")}),o(V),o(q);var P=u(q),X=u(d(P)),Tt=d(X,!0);o(X),o(P);var Z=u(P),tt=u(d(Z)),xt=d(tt,!0);o(tt),o(Z),o(R),o(L),o(Y),W(()=>{var b,w,et,rt;h(vt,`Transaction #${f(l).id??""}`),h(gt,f(l).status),h(ht,((w=(b=f(l).chargeAuthorization)==null?void 0:b.charger)==null?void 0:w.friendlyName)??"Unknown"),h(yt,f(l).connectorId),h(Dt,((rt=(et=f(l).chargeAuthorization)==null?void 0:et.tag)==null?void 0:rt.friendlyName)??"Unknown"),h(Tt,f(l).reason),h(xt,f(l).paymentStatus)}),Ft("click",_t,()=>i(f(l).id)),$(mt,Y)}),$(T,N)},lt=T=>{var N=de();$(T,N)};St(it,T=>{s().data&&s().data.length>0?T(ut):T(lt,!1)})}o(D),$(M,D)},$$slots:{default:!0}}),o(v),$(m,v)},$$slots:{default:!0}}),$t()}export{Me as component};
