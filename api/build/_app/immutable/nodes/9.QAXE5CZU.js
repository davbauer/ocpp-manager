import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.Bk2kbUbt.js";import{e as St,f as Ft,k as d,r as o,w as kt,n as i,t as I,o as f}from"../chunks/runtime.BtD-H5di.js";import{a as w,t as F,c as At,s as _,e as Yt}from"../chunks/render.CEt87p24.js";import{i as Ot}from"../chunks/if.DejqJvjo.js";import{e as zt,i as Et}from"../chunks/each.BBiEY7Op.js";import{i as Ht}from"../chunks/lifecycle.qssZEobZ.js";import{s as Ut,a as dt}from"../chunks/props.CM-xdQ4A.js";import{u as pt,v as Ct}from"../chunks/queryClient.wLn_WNHu.js";import{B as Pt}from"../chunks/BasePage.B17YfXTR.js";import{S as Wt}from"../chunks/Scrollable.7Wp459sa.js";import{t as k,c as S,n as x,g as ot,m as jt,a as ut,b as qt,d as Lt,e as Bt,h as ct,i as Rt,j as Qt,k as Gt,l as Jt,f as Kt}from"../chunks/formatDistanceToNow.Cbs4euKL.js";function Vt(a,t,r){const e=k(a);return isNaN(t)?S(a,NaN):(t&&e.setDate(e.getDate()+t),e)}function Xt(a,t,r){const e=k(a);if(isNaN(t))return S(a,NaN);if(!t)return e;const s=e.getDate(),n=S(a,e.getTime());n.setMonth(e.getMonth()+t+1,0);const c=n.getDate();return s>=c?n:(e.setFullYear(n.getFullYear(),n.getMonth(),s),e)}function N(a,t,r){const{years:e=0,months:s=0,weeks:n=0,days:c=0,hours:g=0,minutes:l=0,seconds:m=0}=t,h=k(a),v=s||e?Xt(h,s+e*12):h,y=c||n?Vt(v,c+n*7):v,M=l+g*60,D=(m+M*60)*1e3;return S(a,+y+D)}function it(a,t){const r=k(a);return r.setHours(0,0,0,0),r}function Zt(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=it(e),c=it(s),g=+n-ot(n),l=+c-ot(c);return Math.round((g-l)/jt)}function te(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t);return e.getFullYear()-s.getFullYear()}function ee(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=lt(e,s),c=Math.abs(Zt(e,s));e.setDate(e.getDate()-n*c);const g=+(lt(e,s)===-n),l=n*(c-g);return l===0?0:l}function lt(a,t){const r=a.getFullYear()-t.getFullYear()||a.getMonth()-t.getMonth()||a.getDate()-t.getDate()||a.getHours()-t.getHours()||a.getMinutes()-t.getMinutes()||a.getSeconds()-t.getSeconds()||a.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function re(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=(+e-+s)/qt;return ut(r==null?void 0:r.roundingMethod)(n)}function ae(a,t,r){const e=Lt(a,t)/Bt;return ut(r==null?void 0:r.roundingMethod)(e)}function se(a,t,r){const[e,s]=x(r==null?void 0:r.in,a,t),n=ct(e,s),c=Math.abs(te(e,s));e.setFullYear(1584),s.setFullYear(1584);const g=ct(e,s)===-n,l=n*(c-+g);return l===0?0:l}function ne(a,t){const[r,e]=x(a,t.start,t.end);return{start:r,end:e}}const de=["years","months","weeks","days","hours","minutes","seconds"];function oe(a,t){const r=Qt(),e=(t==null?void 0:t.locale)??r.locale??Rt,s=(t==null?void 0:t.format)??de,n=(t==null?void 0:t.zero)??!1,c=(t==null?void 0:t.delimiter)??" ";return e.formatDistance?s.reduce((l,m)=>{const h=`x${m.replace(/(^.)/,y=>y.toUpperCase())}`,v=a[m];return v!==void 0&&(n||a[m])?l.concat(e.formatDistance(h,v)):l},[]).join(c):""}function ce(a,t){const{start:r,end:e}=ne(t==null?void 0:t.in,a),s={},n=se(e,r);n&&(s.years=n);const c=N(r,{years:s.years}),g=Gt(e,c);g&&(s.months=g);const l=N(c,{months:s.months}),m=ee(e,l);m&&(s.days=m);const h=N(l,{days:s.days}),v=re(e,h);v&&(s.hours=v);const y=N(h,{hours:s.hours}),M=ae(e,y);M&&(s.minutes=M);const A=N(y,{minutes:s.minutes}),D=Jt(e,A);return D&&(s.seconds=D),s}var ie=F('<div class="bg-base-200 rounded-lg p-6 shadow-md"><div class="mb-4 flex items-center justify-between"><div><h3 class="text-xl font-semibold"> </h3> <p class="text-sm text-gray-500">Status: <span class="font-bold"> </span></p></div> <button class="btn btn-ghost btn-sm">Delete</button></div> <table class="bg-base-300 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Charger</td><td> </td></tr><tr><td class="w-60 font-medium">Connector</td><td> </td></tr><tr><td class="w-60 font-medium">Tag Used</td><td> </td></tr><tr><td class="w-60 font-medium">Start Time</td><td> </td></tr><tr><td class="w-60 font-medium">Duration</td><td> </td></tr><tr><td class="w-60 font-medium">Energy Delivered</td><td> </td></tr><tr><td class="w-60 font-medium">Stop Reason</td><td> </td></tr><tr><td class="w-60 font-medium">Payment Status</td><td> </td></tr></tbody></table></div>'),le=F('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">No Transactions Found</p></div>'),ue=F('<div class="space-y-6"><!></div>'),fe=F('<div class="container mx-auto px-4"><!></div>');function Ne(a,t){St(t,!1);const r=Ut(),e=()=>dt(g,"$mutationTransactionDelete",r),s=()=>dt(c,"$queryTransactions",r);function n(m,h){if(!h)return"N/A";const v=ce({start:new Date(m),end:new Date(h)});return oe(v)}const c=pt(1e4),g=Ct(),l=m=>{e().mutate({id:m})};Ht(),Pt(a,{title:"Transactions",children:(m,h)=>{var v=fe(),y=d(v);Wt(y,{class:"p-4",maxHeight:"80svh",children:(M,A)=>{var D=ue(),ft=d(D);{var mt=T=>{var $=At(),gt=kt($);zt(gt,1,()=>s().data,Et,(ht,u)=>{var Y=ie(),O=d(Y),z=d(O),E=d(z),_t=d(E);o(E);var q=i(E,2),L=i(d(q)),yt=d(L,!0);o(L),o(q),o(z);var Dt=i(z,2);o(O);var B=i(O,2),R=d(B),H=d(R),Q=i(d(H)),bt=d(Q,!0);o(Q),o(H);var U=i(H),G=i(d(U)),Mt=d(G,!0);o(G),o(U);var p=i(U),J=i(d(p)),Tt=d(J,!0);o(J),o(p);var C=i(p),K=i(d(C)),xt=d(K,!0);I(()=>_(xt,new Date(f(u).startTime).toLocaleString())),o(K),o(C);var P=i(C),V=i(d(P)),wt=d(V,!0);I(()=>{var b;return _(wt,n(f(u).startTime,(b=f(u))==null?void 0:b.stopTime))}),o(V),o(P);var W=i(P),X=i(d(W)),Nt=d(X,!0);I(()=>{var b;return _(Nt,f(u).energyDelivered?`${f(u).energyDelivered/1e3} kWh`:(b=f(u).estimatedEnergyDelivered)!=null&&b.totalEnergyDelivered?`Estimated ${f(u).estimatedEnergyDelivered.totalEnergyDelivered} kWh ${Kt(f(u).estimatedEnergyDelivered.lastUpdateTimestamp)}`:"N/A")}),o(X),o(W);var j=i(W),Z=i(d(j)),$t=d(Z,!0);o(Z),o(j);var tt=i(j),et=i(d(tt)),It=d(et,!0);o(et),o(tt),o(R),o(B),o(Y),I(()=>{var b,rt,at,st,nt;_(_t,`Transaction #${f(u).id??""}`),_(yt,f(u).status),_(bt,((rt=(b=f(u).chargeAuthorization)==null?void 0:b.charger)==null?void 0:rt.friendlyName)??"Unknown"),_(Mt,(at=f(u).connector)==null?void 0:at.connectorId),_(Tt,((nt=(st=f(u).chargeAuthorization)==null?void 0:st.tag)==null?void 0:nt.friendlyName)??"Unknown"),_($t,f(u).reason||"N/A"),_(It,f(u).paymentStatus)}),Yt("click",Dt,()=>l(f(u).id)),w(ht,Y)}),w(T,$)},vt=T=>{var $=le();w(T,$)};Ot(ft,T=>{s().data&&s().data.length>0?T(mt):T(vt,!1)})}o(D),w(M,D)},$$slots:{default:!0}}),o(v),w(m,v)},$$slots:{default:!0}}),Ft()}export{Ne as component};
