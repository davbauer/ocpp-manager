var P=Object.defineProperty;var k=(e,r,t)=>r in e?P(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var f=(e,r,t)=>k(e,typeof r!="symbol"?r+"":r,t);import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.DAvIKmow.js";import{q as C,v as _}from"../chunks/runtime.DbfKYwPz.js";import{i as A}from"../chunks/lifecycle.BtZd3_IO.js";import{o as $}from"../chunks/index-client.CiIdi0Fq.js";var U=(e,r,t={})=>{let a=`${e}=${r}`;if(e.startsWith("__Secure-")&&!t.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(e.startsWith("__Host-")){if(!t.secure)throw new Error("__Host- Cookie must have Secure attributes");if(t.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(t.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(t&&typeof t.maxAge=="number"&&t.maxAge>=0){if(t.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");a+=`; Max-Age=${t.maxAge|0}`}if(t.domain&&t.prefix!=="host"&&(a+=`; Domain=${t.domain}`),t.path&&(a+=`; Path=${t.path}`),t.expires){if(t.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");a+=`; Expires=${t.expires.toUTCString()}`}if(t.httpOnly&&(a+="; HttpOnly"),t.secure&&(a+="; Secure"),t.sameSite&&(a+=`; SameSite=${t.sameSite.charAt(0).toUpperCase()+t.sameSite.slice(1)}`),t.partitioned){if(!t.secure)throw new Error("Partitioned Cookie must have Secure attributes");a+="; Partitioned"}return a},E=(e,r,t)=>(r=encodeURIComponent(r),U(e,r,t)),O=(e,r)=>(e=e.replace(/\/+$/,""),e=e+"/",r=r.replace(/^\/+/,""),e+r),w=(e,r)=>{for(const[t,a]of Object.entries(r)){const i=new RegExp("/:"+t+"(?:{[^/]+})?\\??");e=e.replace(i,a?`/${a}`:"")}return e},p=e=>{const r=new URLSearchParams;for(const[t,a]of Object.entries(e))if(a!==void 0)if(Array.isArray(a))for(const i of a)r.append(t,i);else r.set(t,a);return r},g=(e,r)=>{switch(r){case"ws":return e.replace(/^http/,"ws");case"http":return e.replace(/^ws/,"http")}},j=e=>/^https?:\/\/[^\/]+?\/index$/.test(e)?e.replace(/\/index$/,"/"):e.replace(/\/index$/,"");function m(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function S(e,r){if(!m(e)&&!m(r))return r;const t={...e};for(const a in r){const i=r[a];m(t[a])&&m(i)?t[a]=S(t[a],i):t[a]=i}return t}var b=(e,r)=>new Proxy(()=>{},{get(a,i){if(!(typeof i!="string"||i==="then"))return b(e,[...r,i])},apply(a,i,n){return e({path:r,args:n})}}),q=class{constructor(e,r){f(this,"url");f(this,"method");f(this,"queryParams");f(this,"pathParams",{});f(this,"rBody");f(this,"cType");f(this,"fetch",async(e,r)=>{if(e){if(e.query&&(this.queryParams=p(e.query)),e.form){const o=new FormData;for(const[h,c]of Object.entries(e.form))if(Array.isArray(c))for(const s of c)o.append(h,s);else o.append(h,c);this.rBody=o}e.json&&(this.rBody=JSON.stringify(e.json),this.cType="application/json"),e.param&&(this.pathParams=e.param)}let t=this.method.toUpperCase();const a={...e==null?void 0:e.header,...typeof(r==null?void 0:r.headers)=="function"?await r.headers():r==null?void 0:r.headers};if(e!=null&&e.cookie){const o=[];for(const[h,c]of Object.entries(e.cookie))o.push(E(h,c,{path:"/"}));a.Cookie=o.join(",")}this.cType&&(a["Content-Type"]=this.cType);const i=new Headers(a);let n=this.url;n=j(n),n=w(n,this.pathParams),this.queryParams&&(n=n+"?"+this.queryParams.toString()),t=this.method.toUpperCase();const d=!(t==="GET"||t==="HEAD");return((r==null?void 0:r.fetch)||fetch)(n,{body:d?this.rBody:void 0,method:t,headers:i,...r==null?void 0:r.init})});this.url=e,this.method=r}},T=(e,r)=>b(function t(a){var c;const i=[...a.path];if(i.at(-1)==="toString")return i.at(-2)==="name"?i.at(-3)||"":t.toString();if(i.at(-1)==="valueOf")return i.at(-2)==="name"?i.at(-3)||"":t;let n="";if(/^\$/.test(i.at(-1))){const s=i.pop();s&&(n=s.replace(/^\$/,""))}const d=i.join("/"),o=O(e,d);if(n==="url"){let s=o;return a.args[0]&&(a.args[0].param&&(s=w(o,a.args[0].param)),a.args[0].query&&(s=s+"?"+p(a.args[0].query).toString())),new URL(s)}if(n==="ws"){const s=g(a.args[0]&&a.args[0].param?w(o,a.args[0].param):o,"ws"),l=new URL(s),v=(c=a.args[0])==null?void 0:c.query;return v&&Object.entries(v).forEach(([u,y])=>{Array.isArray(y)?y.forEach(x=>l.searchParams.append(u,x)):l.searchParams.set(u,y)}),((...u)=>(r==null?void 0:r.webSocket)!==void 0&&typeof r.webSocket=="function"?r.webSocket(...u):new WebSocket(...u))(l.toString())}const h=new q(o,n);if(n){r??(r={});const s=S(r,{...a.args[1]});return h.fetch(a.args[0],s)}return h},[]);function I(e,r){C(r,!1),T("http://localhost:8787/"),$(()=>{window.location.href="/monitoring"}),A(),_()}export{I as component};
