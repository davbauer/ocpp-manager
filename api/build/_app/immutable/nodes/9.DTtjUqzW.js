import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.D2MqI-vY.js";import{e as zt,f as Et,k as d,r as o,x as ct,n as i,t as $,q as f}from"../chunks/runtime.Bd4EnX-u.js";import{a as M,t as w,c as it,s as y,e as Ht}from"../chunks/render.qcllsTlz.js";import{i as J}from"../chunks/if.dA70V0X5.js";import{e as Ut,i as Ct}from"../chunks/each.CqG-kNtr.js";import{u as qt,v as Lt,s as Pt}from"../chunks/queryClient.BEUBuIH3.js";import{i as Wt}from"../chunks/lifecycle.C1YRy3UF.js";import{s as jt,a as lt}from"../chunks/props.D1o1xWrs.js";import{B as Bt}from"../chunks/BasePage.BX5KYPMs.js";import{S as Rt}from"../chunks/Scrollable.BrMQmy-M.js";import{t as E,c as z,n as k,g as ut,m as Qt,a as gt,b as Gt,d as Jt,e as Kt,h as ft,i as Vt,j as Xt,k as Zt,l as te,f as ee}from"../chunks/formatDistanceToNow.Cbs4euKL.js";function re(a,t,r){const e=E(a);return isNaN(t)?z(a,NaN):(t&&e.setDate(e.getDate()+t),e)}function ae(a,t,r){const e=E(a);if(isNaN(t))return z(a,NaN);if(!t)return e;const s=e.getDate(),n=z(a,e.getTime());n.setMonth(e.getMonth()+t+1,0);const c=n.getDate();return s>=c?n:(e.setFullYear(n.getFullYear(),n.getMonth(),s),e)}function A(a,t,r){const{years:e=0,months:s=0,weeks:n=0,days:c=0,hours:g=0,minutes:l=0,seconds:m=0}=t,h=E(a),v=s||e?ae(h,s+e*12):h,T=c||n?re(v,c+n*7):v,N=l+g*60,x=(m+N*60)*1e3;return z(a,+T+x)}function mt(a,t){const r=E(a);return r.setHours(0,0,0,0),r}function se(a,t,r){const[e,s]=k(r==null?void 0:r.in,a,t),n=mt(e),c=mt(s),g=+n-ut(n),l=+c-ut(c);return Math.round((g-l)/Qt)}function ne(a,t,r){const[e,s]=k(r==null?void 0:r.in,a,t);return e.getFullYear()-s.getFullYear()}function de(a,t,r){const[e,s]=k(r==null?void 0:r.in,a,t),n=vt(e,s),c=Math.abs(se(e,s));e.setDate(e.getDate()-n*c);const g=+(vt(e,s)===-n),l=n*(c-g);return l===0?0:l}function vt(a,t){const r=a.getFullYear()-t.getFullYear()||a.getMonth()-t.getMonth()||a.getDate()-t.getDate()||a.getHours()-t.getHours()||a.getMinutes()-t.getMinutes()||a.getSeconds()-t.getSeconds()||a.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function oe(a,t,r){const[e,s]=k(r==null?void 0:r.in,a,t),n=(+e-+s)/Gt;return gt(r==null?void 0:r.roundingMethod)(n)}function ce(a,t,r){const e=Jt(a,t)/Kt;return gt(r==null?void 0:r.roundingMethod)(e)}function ie(a,t,r){const[e,s]=k(r==null?void 0:r.in,a,t),n=ft(e,s),c=Math.abs(ne(e,s));e.setFullYear(1584),s.setFullYear(1584);const g=ft(e,s)===-n,l=n*(c-+g);return l===0?0:l}function le(a,t){const[r,e]=k(a,t.start,t.end);return{start:r,end:e}}const ue=["years","months","weeks","days","hours","minutes","seconds"];function fe(a,t){const r=Xt(),e=(t==null?void 0:t.locale)??r.locale??Vt,s=(t==null?void 0:t.format)??ue,n=(t==null?void 0:t.zero)??!1,c=(t==null?void 0:t.delimiter)??" ";return e.formatDistance?s.reduce((l,m)=>{const h=`x${m.replace(/(^.)/,T=>T.toUpperCase())}`,v=a[m];return v!==void 0&&(n||a[m])?l.concat(e.formatDistance(h,v)):l},[]).join(c):""}function me(a,t){const{start:r,end:e}=le(t==null?void 0:t.in,a),s={},n=ie(e,r);n&&(s.years=n);const c=A(r,{years:s.years}),g=Zt(e,c);g&&(s.months=g);const l=A(c,{months:s.months}),m=de(e,l);m&&(s.days=m);const h=A(l,{days:s.days}),v=oe(e,h);v&&(s.hours=v);const T=A(h,{hours:s.hours}),N=ce(e,T);N&&(s.minutes=N);const H=A(T,{minutes:s.minutes}),x=te(e,H);return x&&(s.seconds=x),s}var ve=w("<td> </td>"),ge=w('<td class="tooltip"> </td>'),_e=w("<td>N/A</td>"),he=w('<div class="bg-base-200 rounded-lg p-6 shadow-md"><div class="mb-4 flex items-center justify-between"><div><h3 class="text-xl font-semibold"> </h3> <p class="text-sm text-gray-500">Status: <span class="font-bold"> </span></p></div> <button class="btn btn-ghost btn-sm">Delete</button></div> <table class="bg-base-300 table w-full overflow-hidden rounded-lg"><tbody><tr><td class="w-60 font-medium">Charger</td><td> </td></tr><tr><td class="w-60 font-medium">Connector</td><td> </td></tr><tr><td class="w-60 font-medium">Tag Used</td><td> </td></tr><tr><td class="w-60 font-medium">Start Time</td><td> </td></tr><tr><td class="w-60 font-medium">Duration</td><td> </td></tr><tr><td class="w-60 font-medium">Energy Delivered</td><!></tr><tr><td class="w-60 font-medium">Stop Reason</td><td> </td></tr><tr><td class="w-60 font-medium">Payment Status</td><td> </td></tr></tbody></table></div>'),ye=w('<div class="bg-base-200 rounded-lg p-8 text-center"><p class="text-base-content">No Transactions Found</p></div>'),De=w('<div class="space-y-6"><!></div>'),be=w('<div class="container mx-auto px-4"><!></div>');function pe(a,t){zt(t,!1);const r=jt(),e=()=>lt(g,"$mutationTransactionDelete",r),s=()=>lt(c,"$queryTransactions",r);function n(m,h){if(!h)return"N/A";const v=me({start:new Date(m),end:new Date(h)});return fe(v)}const c=qt(1e4),g=Lt(),l=m=>{e().mutate({id:m})};Wt(),Bt(a,{title:"Transactions",children:(m,h)=>{var v=be(),T=d(v);Rt(T,{class:"p-4",maxHeight:"80svh",children:(N,H)=>{var x=De(),_t=d(x);{var ht=I=>{var Y=it(),Dt=ct(Y);Ut(Dt,1,()=>s().data,Ct,(bt,u)=>{var U=he(),C=d(U),q=d(C),L=d(q),Mt=d(L);o(L);var K=i(L,2),V=i(d(K)),Tt=d(V,!0);o(V),o(K),o(q);var xt=i(q,2);o(C);var X=i(C,2),Z=d(X),P=d(Z),tt=i(d(P)),wt=d(tt,!0);o(tt),o(P);var W=i(P),et=i(d(W)),Nt=d(et,!0);o(et),o(W);var j=i(W),rt=i(d(j)),It=d(rt,!0);o(rt),o(j);var B=i(j),at=i(d(B)),St=d(at,!0);$(()=>y(St,new Date(f(u).startTime).toLocaleString())),o(at),o(B);var R=i(B),st=i(d(R)),Ft=d(st,!0);$(()=>{var _;return y(Ft,n(f(u).startTime,(_=f(u))==null?void 0:_.stopTime))}),o(st),o(R);var Q=i(R),$t=i(d(Q));{var kt=_=>{var D=ve(),S=d(D);o(D),$(()=>y(S,`${f(u).energyDelivered/1e3} kWh`)),M(_,D)},At=_=>{var D=it(),S=ct(D);{var p=F=>{var b=ge();$(()=>Pt(b,"data-tip",`Last update ${ee(f(u).estimatedEnergyDelivered.lastUpdateTimestamp)??""}`));var Ot=d(b);o(b),$(()=>y(Ot,`Estimated ${f(u).estimatedEnergyDelivered.totalEnergyDelivered/1e3}
												kWh`)),M(F,b)},O=F=>{var b=_e();M(F,b)};J(S,F=>{var b;(b=f(u).estimatedEnergyDelivered)!=null&&b.totalEnergyDelivered?F(p):F(O,!1)},!0)}M(_,D)};J($t,_=>{f(u).energyDelivered?_(kt):_(At,!1)})}o(Q);var G=i(Q),nt=i(d(G)),Yt=d(nt,!0);o(nt),o(G);var dt=i(G),ot=i(d(dt)),pt=d(ot,!0);o(ot),o(dt),o(Z),o(X),o(U),$(()=>{var _,D,S,p,O;y(Mt,`Transaction #${f(u).id??""}`),y(Tt,f(u).status),y(wt,((D=(_=f(u).chargeAuthorization)==null?void 0:_.charger)==null?void 0:D.friendlyName)??"Unknown"),y(Nt,(S=f(u).connector)==null?void 0:S.connectorId),y(It,((O=(p=f(u).chargeAuthorization)==null?void 0:p.tag)==null?void 0:O.friendlyName)??"Unknown"),y(Yt,f(u).reason||"N/A"),y(pt,f(u).paymentStatus)}),Ht("click",xt,()=>l(f(u).id)),M(bt,U)}),M(I,Y)},yt=I=>{var Y=ye();M(I,Y)};J(_t,I=>{s().data&&s().data.length>0?I(ht):I(yt,!1)})}o(x),M(N,x)},$$slots:{default:!0}}),o(v),M(m,v)},$$slots:{default:!0}}),Et()}export{pe as component};
